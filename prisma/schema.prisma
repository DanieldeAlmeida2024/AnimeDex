// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db" // Você pode usar env("DATABASE_URL") aqui também, é mais flexível
}

model Anime {
  id              Int      @id @default(autoincrement())
  imdbId          String   @unique
  title           String // Agora será preenchido pela TMDB
  poster          String?  // Pode vir nulo da TMDB
  animefireUrl    String?  @unique // Opcional: Se nem sempre tem uma URL AnimeFire
  description     String?
  genres          String?  // JSON string de array de strings (salvar como string)
  releaseYear     Int?
  background      String?  // URL da imagem de fundo
  type            String?  // "movie" ou "series" - Pode vir nulo
  episodesData    String?  // JSON string de ScrapedEpisode[] - SEM @db.Text
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  stremioId       String?  // Pode ser igual ao imdbId, ou um ID interno do Stremio
  lastSearchedAt  DateTime @default(now())

}

// Se você tem um modelo chamado 'ScrapedTorrent' ou similar que contenha 'episodesData'
// e também tinha o @db.Text, remova-o de lá também.

model SearchLog {
  id        Int      @id @default(autoincrement())
  imdbId    String
  searchAt  DateTime
}